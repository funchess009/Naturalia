<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Plantes contre Zombies</title>
    <link rel="stylesheet" href="styling/style.css" />
    <link rel="icon" href="images/logo_green.png" type="image/png" />
  </head>
  <body>
    <header>
      <div id="left">
        <a href="index.html">
          <!-- Provide a valid URL -->
          <img src="images/logo_green.png" alt="Logo" id="logo" />
        </a>
        <h2 id="Header-Name">Naturalia</h2>
      </div>
      <div id="middle">
        <button class="current"><a href="index.html">Acceuil</a></button>
        <button>
          <a href="signets.html">Signets</a>
        </button>
        <button>
          <a href="parcourir.html">Parcourir</a>
        </button>
        <button>
          <a href="créer.html">Créer</a>
        </button>
        <button>
          <a href="plus.html">Plus</a>
        </button>
      </div>
      <div id="right">
        <a href="search.html">
          <img src="images/search.png" alt="" id="search" />
        </a>
        <a href="login.html">
          <img src="images/user.png" alt="" id="user" />
        </a>
      </div>
    </header>
    <div id="zomMain">
      <div id="purchase">
        <div id="sunflower">
          <img id="sunflowerImg" src="images/Sunflower2009HD.webp" alt="" />
          <h3>10</h3>
        </div>
        <div id="peashooter">
          <img
            id="peashooterImg"
            src="images/1769829-plant_peashooter_thumb.webp"
            alt=""
          />
          <h3>20</h3>
        </div>
        <div id="snowpea">
          <img id="snowpeaImg" src="images/HDplus_snowpea.webp" alt="" />
          <h3>35</h3>
        </div>
        <div id="Money">
          <img src="images/SunPlantVZom.webp" alt="Sun image" />
          <h1>150</h1>
        </div>
      </div>
      <div id="terrain">
        <div id="lawnMowers">
          <img src="images/Lawn_Mower.webp" alt="" />
          <img src="images/Lawn_Mower.webp" alt="" />
          <img src="images/Lawn_Mower.webp" alt="" />
          <img src="images/Lawn_Mower.webp" alt="" />
          <img src="images/Lawn_Mower.webp" alt="" />
        </div>
        <div id="plantContainer"></div>
        <div id="grass">
          <div class="zomGrass" id="grass1"></div>
          <div class="zomGrass" id="grass2"></div>
          <div class="zomGrass" id="grass3"></div>
          <div class="zomGrass" id="grass4"></div>
          <div class="zomGrass" id="grass5"></div>
          <div class="zomGrass" id="grass6"></div>
          <div class="zomGrass" id="grass7"></div>
          <div class="zomGrass" id="grass8"></div>
          <div class="zomGrass" id="grass9"></div>
          <div class="zomGrass" id="grass10"></div>
          <div class="zomGrass" id="grass11"></div>
          <div class="zomGrass" id="grass12"></div>
          <div class="zomGrass" id="grass13"></div>
          <div class="zomGrass" id="grass14"></div>
          <div class="zomGrass" id="grass15"></div>
          <div class="zomGrass" id="grass16"></div>
          <div class="zomGrass" id="grass17"></div>
          <div class="zomGrass" id="grass18"></div>
          <div class="zomGrass" id="grass19"></div>
          <div class="zomGrass" id="grass20"></div>
          <div class="zomGrass" id="grass21"></div>
          <div class="zomGrass" id="grass22"></div>
          <div class="zomGrass" id="grass23"></div>
          <div class="zomGrass" id="grass24"></div>
          <div class="zomGrass" id="grass25"></div>
          <div class="zomGrass" id="grass26"></div>
          <div class="zomGrass" id="grass27"></div>
          <div class="zomGrass" id="grass28"></div>
          <div class="zomGrass" id="grass29"></div>
          <div class="zomGrass" id="grass30"></div>
          <div class="zomGrass" id="grass31"></div>
          <div class="zomGrass" id="grass32"></div>
          <div class="zomGrass" id="grass33"></div>
          <div class="zomGrass" id="grass34"></div>
          <div class="zomGrass" id="grass35"></div>
          <div class="zomGrass" id="grass36"></div>
          <div class="zomGrass" id="grass37"></div>
          <div class="zomGrass" id="grass38"></div>
          <div class="zomGrass" id="grass39"></div>
          <div class="zomGrass" id="grass40"></div>
          <div class="zomGrass" id="grass41"></div>
          <div class="zomGrass" id="grass42"></div>
          <div class="zomGrass" id="grass43"></div>
          <div class="zomGrass" id="grass44"></div>
          <div class="zomGrass" id="grass45"></div>
        </div>
      </div>
    </div>

    <script>
      let flowerCounter = 0;
      let plantContainer = document.getElementById("plantContainer");
      let plants = {};
      let positions = {
        grass1: { position: [1, 1], ocupation: "none" },
        // Add positions for all grass elements...
      };
      let currentFlower = null; // Initialize currentFlower to null
      let currentSquare;
      let sunflowerMain = document.getElementById("sunflowerImg");
      let peashooterMain = document.getElementById("peashooterImg");
      let snowpeaMain = document.getElementById("snowpeaImg");
      squares = document.querySelectorAll(".zomGrass");

      sunflowerMain.addEventListener("click", (event) => {
        if (currentFlower !== null) {
          // Check if currentFlower is not null
          currentFlower.style.border = "0px solid black ";
        }

        currentFlower = sunflowerMain;
        currentFlower.style.border = "1px solid blue";
        console.log(currentFlower);
      });
      peashooterMain.addEventListener("click", (event) => {
        if (currentFlower !== null) {
          // Check if currentFlower is not null
          currentFlower.style.border = "0px solid black ";
        }
        currentFlower = peashooterMain;
        currentFlower.style.border = "1px solid blue ";
        console.log(currentFlower);
      });
      snowpeaMain.addEventListener("click", (event) => {
        if (currentFlower !== null) {
          // Check if currentFlower is not null
          currentFlower.style.border = "0px solid black ";
        }
        currentFlower = snowpeaMain;
        currentFlower.style.border = "1px solid blue ";
        console.log(currentFlower);
      });

      for (let x = 0; x < squares.length; x += 2) {
        squares[x].style.backgroundColor = "darkGreen";
      }
      squares.forEach((square) => {
        square.addEventListener("click", (event) => {
          currentSquare = square;
          console.log("checking");
          if (currentFlower === peashooterMain) {
            console.log("new peashooter");
            new peashooter(currentSquare.id);
          }
        });
      });

      originalSunflower = document.getElementById("sunflowerImg");

      class peashooter {
        constructor(squarePosition) {
          flowerCounter++;
          console.log("position:" + squarePosition);

          let id = "peashooter" + flowerCounter;

          plantContainer.innerHTML +=
            '<img style="" class="newPeashooter" id="newPeashooter' +
            flowerCounter +
            '" src="images/1769829-plant_peashooter_thumb.webp">';

          plants[id] = {}; // Fixed object initialization
          plants[id].position = squarePosition;
          console.log(id);
        }
      }
    </script>
  </body>
</html>
