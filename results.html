<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="icon" href="images/logo_green.png" type="png" />
    <link rel="stylesheet" href="styling/style.css" />
  </head>
  <body>
    <header>
      <div id="left">
        <a href="index.html">
          <!-- Provide a valid URL -->
          <img src="images/logo_green.png" alt="Logo" id="logo" />
        </a>
        <h2 id="Header-Name">Naturalia</h2>
      </div>
      <div id="middle">
        <button class="current"><a href="index.html">Accueil</a></button>
        <button>
          <a href="signets.html">Signets</a>
        </button>
        <button>
          <a href="parcourir.html">Parcourir</a>
        </button>
        <button>
          <a href="créer.html">Créer</a>
        </button>
        <button>
          <a href="plus.html">Plus</a>
        </button>
      </div>
      <div id="right">
        <a href="search.html">
          <img src="images/search.png" alt="" id="search" />
        </a>
        <a href="login.html">
          <img src="images/user.png" alt="" id="user" />
        </a>
      </div>
    </header>
    <h1 id="displayRésultat" style="margin-top: 100px">Tu as eu /20. Bravo!</h1>
    <a style="margin-bottom: 1000px" href="quiz.html"
      ><h3>Reprend le quiz</h3>
    </a>
    <script>
      function getQueryParams() {
        var queryParams = window.location.search.substring(1);
        var params = {};
        queryParams.split("&").forEach(function (param) {
          var keyValue = param.split("=");
          params[keyValue[0]] = keyValue[1];
        });
        return params;
      }
      let bonneRéponse = {
        question1: "b", // Forêt amazonienne
        question2: "a", // Océan Pacifique
        question3: "c", // Mont Everest
        question4: "a", // Désert du Sahara
        question5: "a", // Photosynthèse
        question6: "c", // Éléphant d'Afrique
        question7: "b", // Pollinisation
        question8: "b", // Grande Barrière de Corail
        question9: "b", // Amazone
        question10: "c", // Caméléon
        question11: "a", // Émissions de gaz à effet de serre
        question12: "a", // Ouragan
        question13: "b", // Parc national de Serengeti
        question14: "c", // Tortue luth
        question15: "a", // Érosion
        question16: "a", // Lac Baïkal
        question17: "b", // Quelques semaines
        question18: "b", // Lion
        question19: "b", // Absorption d'eau et de nutriments
        question20: "b", // 70%
      };
      let questionsInfo = {
        question1: {
          title: "Quelle est la plus grande forêt tropicale du monde ?",
          a: "Forêt boréale",
          b: "Forêt amazonienne",
          c: "Forêt de séquoias",
        },
        question2: {
          title: "Quel est le plus grand océan de la planète ?",
          a: "Océan Pacifique",
          b: "Océan Indien",
          c: "Océan Atlantique",
        },
        question3: {
          title: "Quelle est la plus haute montagne du monde ?",
          a: "Mont McKinley (Denali)",
          b: "Mont Kilimandjaro",
          c: "Mont Everest",
        },
        question4: {
          title:
            "Quel est le plus grand désert du monde en termes de superficie ?",
          a: "Désert du Sahara",
          b: "Désert de Gobi",
          c: "Désert d'Atacama",
        },
        question5: {
          title:
            "Quel est le nom du processus par lequel les plantes produisent leur propre nourriture ?",
          a: "Photosynthèse",
          b: "Respiration cellulaire",
          c: "Transpiration",
        },
        question6: {
          title: "Quel est le plus grand mammifère terrestre actuel ?",
          a: "Rhinocéros blanc",
          b: "Girafe",
          c: "Éléphant d'Afrique",
        },
        question7: {
          title: "Quel est le rôle principal des abeilles dans la nature ?",
          a: "Prédation",
          b: "Pollinisation",
          c: "Décomposition",
        },
        question8: {
          title: "Quel est le plus grand récif corallien au monde ?",
          a: "Récif de Tubbataha",
          b: "Grande Barrière de Corail",
          c: "Récif de Belize",
        },
        question9: {
          title: "Quelle est la plus longue rivière du monde ?",
          a: "Yangtsé",
          b: "Amazone",
          c: "Nil",
        },
        question10: {
          title:
            "Quel animal est capable de changer de couleur pour se camoufler ?",
          a: "Calmar",
          b: "Poisson-clown",
          c: "Caméléon",
        },
        question11: {
          title:
            "Quelle est la principale cause du réchauffement climatique actuel ?",
          a: "Émissions de gaz à effet de serre",
          b: "Activité solaire accrue",
          c: "Éruptions volcaniques",
        },
        question12: {
          title:
            "Quel est le nom du phénomène météorologique caractérisé par des vents violents en rotation autour d'un centre basse pression ?",
          a: "Ouragan",
          b: "Tornade",
          c: "Typhon",
        },
        question13: {
          title:
            "Quelle est la plus grande réserve naturelle d'Afrique, abritant une diversité exceptionnelle de faune et de flore ?",
          a: "Réserve de Selous",
          b: "Parc national de Serengeti",
          c: "Réserve de biosphère du mont Nimba",
        },
        question14: {
          title: "Quelle est la plus grande espèce de tortue marine ?",
          a: "Tortue de Kemp",
          b: "Tortue verte",
          c: "Tortue luth",
        },
        question15: {
          title:
            "Quel est le nom du processus par lequel les roches sont brisées en morceaux plus petits par l'action des agents atmosphériques ?",
          a: "Érosion",
          b: "Sédimentation",
          c: "Fusion",
        },
        question16: {
          title:
            "Quel est le plus grand lac d'eau douce en termes de superficie ?",
          a: "Lac Baïkal",
          b: "Lac Supérieur",
          c: "Lac Victoria",
        },
        question17: {
          title:
            "Quelle est la durée moyenne de vie d'une libellule à l'état adulte ?",
          a: "Quelques jours",
          b: "Quelques semaines",
          c: "Quelques mois",
        },
        question18: {
          title: "Quel est le plus grand prédateur terrestre ?",
          a: "Crocodile du Nil",
          b: "Lion",
          c: "Ours polaire",
        },
        question19: {
          title: "Quelle est la principale fonction des racines des plantes ?",
          a: "Photosynthèse",
          b: "Absorption d'eau et de nutriments",
          c: "Support structurel",
        },
        question20: {
          title:
            "Quel est le pourcentage approximatif de la surface de la Terre recouvert par les océans ?",
          a: "50%",
          b: "70%",
          c: "90%",
        },
      };

      let wrongAnswers = [];
      function resultCalculator() {
        let numberRight = 0;

        // Assuming utilisateurRéponse is an object containing user's responses
        // and bonneRéponse is an object containing correct answers
        const utilisateurRéponse = getQueryParams(); // Assuming getQueryParams() function returns user responses

        // Loop through each question and compare user's response with correct answer
        for (const questionId in bonneRéponse) {
          const correctAnswer = bonneRéponse[questionId];
          const userAnswer = utilisateurRéponse[questionId];

          if (userAnswer === correctAnswer) {
            numberRight++;
          } else {
            wrongAnswers.push(questionId);
          }
        }

        // The variable numberRight now contains the total number of correct answers
        console.log("Number of correct answers:", numberRight);
        return numberRight;
      }
      let compliment = "";

      let displayRésultat = document.getElementById("displayRésultat");
      // Call the function to get the result
      const result = resultCalculator();
      if (result === 20) {
        compliment = "Félicitations! Tu es un génie absolu!";
      } else if (result >= 16 && result <= 19) {
        compliment = "Bravo! Excellent travail!";
      } else if (result >= 11 && result <= 15) {
        compliment = "Bien joué! Tu es sur la bonne voie!";
      } else if (result >= 6 && result <= 10) {
        compliment = "Pas mal du tout! Tu progresses bien!";
      } else if (result <= 5) {
        compliment = "Ne t'inquiète pas, tu peux toujours t'améliorer!";
      }
      displayRésultat.innerHTML = "Tu as eu " + result + "/20 " + compliment;
      let wrongAnswersMessages = [];
      console.log(wrongAnswers);
      for (let x = 0; x < wrongAnswers.length; x++) {
        let t = questionsInfo.wrongAnswers[x];
        let wrongAnswersMessages = t.title;
        console.log(wrongAnswersMessages);
      }
    </script>
  </body>
</html>
